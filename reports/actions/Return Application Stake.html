<p>For explanations of generalized dynamical systems as well as how the mathematical specification library works in detail, please consult the documentation <a href="https://github.com/BlockScience/MSML/tree/main/docs">here</a></p>Graph Legend:<br/>Cylinder: Entity<br/>Orange Diamond: Boundary Action<br/>Red Square: Policy<br/>Blue Circle: Mechanism<br/>Transparent Circle: State Variable<h2>Action Map</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"

 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<!-- Generated by graphviz version 2.48.0 (0)

 -->

<!-- Title: Return Application Stake Pages: 1 -->

<svg width="957pt" height="424pt"

 viewBox="0.00 0.00 957.03 424.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 420)">

<title>Return Application Stake</title>

<polygon fill="white" stroke="transparent" points="-4,4 -4,-420 953.03,-420 953.03,4 -4,4"/>

<!-- Return Application Stake -->

<g id="node1" class="node">

<title>Return Application Stake</title>

<polygon fill="yellow" stroke="yellow" points="575.74,-416 430.29,-398 575.74,-380 721.2,-398 575.74,-416"/>

<text text-anchor="middle" x="575.74" y="-394.3" font-family="Times,serif" font-size="14.00">Return Application Stake</text>

</g>

<!-- Return Application Stake Policy -->

<g id="node2" class="node">

<title>Return Application Stake Policy</title>

<polygon fill="red" stroke="red" points="674.24,-299 477.24,-299 477.24,-263 674.24,-263 674.24,-299"/>

<text text-anchor="middle" x="575.74" y="-277.3" font-family="Times,serif" font-size="14.00">Return Application Stake Policy</text>

</g>

<!-- Return Application Stake&#45;&gt;Return Application Stake Policy -->

<g id="edge1" class="edge">

<title>Return Application Stake&#45;&gt;Return Application Stake Policy</title>

<path fill="none" stroke="black" d="M575.74,-379.53C575.74,-360.94 575.74,-331.24 575.74,-309.5"/>

<polygon fill="black" stroke="black" points="579.24,-309.25 575.74,-299.25 572.24,-309.25 579.24,-309.25"/>

<text text-anchor="middle" x="610.24" y="-350.8" font-family="Times,serif" font-size="14.00">Return</text>

<text text-anchor="middle" x="610.24" y="-335.8" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="610.24" y="-320.8" font-family="Times,serif" font-size="14.00">Stake Space</text>

</g>

<!-- Update Application Stake Status -->

<g id="node3" class="node">

<title>Update Application Stake Status</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="284.74" cy="-164" rx="128.88" ry="18"/>

<text text-anchor="middle" x="284.74" y="-160.3" font-family="Times,serif" font-size="14.00">Update Application Stake Status</text>

</g>

<!-- Return Application Stake Policy&#45;&gt;Update Application Stake Status -->

<g id="edge2" class="edge">

<title>Return Application Stake Policy&#45;&gt;Update Application Stake Status</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M532.49,-262.91C479.81,-242.09 390.96,-206.98 335.21,-184.94"/>

<polygon fill="black" stroke="black" points="336.46,-181.68 325.87,-181.26 333.89,-188.19 336.46,-181.68"/>

<text text-anchor="middle" x="516.24" y="-226.3" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="516.24" y="-211.3" font-family="Times,serif" font-size="14.00">Stake Space</text>

</g>

<!-- Modify Application POKT Holdings -->

<g id="node4" class="node">

<title>Modify Application POKT Holdings</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="575.74" cy="-164" rx="144.07" ry="18"/>

<text text-anchor="middle" x="575.74" y="-160.3" font-family="Times,serif" font-size="14.00">Modify Application POKT Holdings</text>

</g>

<!-- Return Application Stake Policy&#45;&gt;Modify Application POKT Holdings -->

<g id="edge3" class="edge">

<title>Return Application Stake Policy&#45;&gt;Modify Application POKT Holdings</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M575.74,-262.53C575.74,-243.94 575.74,-214.24 575.74,-192.5"/>

<polygon fill="black" stroke="black" points="579.24,-192.25 575.74,-182.25 572.24,-192.25 579.24,-192.25"/>

<text text-anchor="middle" x="612.74" y="-233.8" font-family="Times,serif" font-size="14.00">Modify</text>

<text text-anchor="middle" x="612.74" y="-218.8" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="612.74" y="-203.8" font-family="Times,serif" font-size="14.00">POKT Space</text>

</g>

<!-- Modify Application Stake -->

<g id="node5" class="node">

<title>Modify Application Stake</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="843.74" cy="-164" rx="105.08" ry="18"/>

<text text-anchor="middle" x="843.74" y="-160.3" font-family="Times,serif" font-size="14.00">Modify Application Stake</text>

</g>

<!-- Return Application Stake Policy&#45;&gt;Modify Application Stake -->

<g id="edge4" class="edge">

<title>Return Application Stake Policy&#45;&gt;Modify Application Stake</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M615.57,-262.91C664.17,-242.06 746.17,-206.87 797.5,-184.84"/>

<polygon fill="black" stroke="black" points="798.9,-188.05 806.71,-180.89 796.14,-181.62 798.9,-188.05"/>

<text text-anchor="middle" x="793.74" y="-233.8" font-family="Times,serif" font-size="14.00">Modify</text>

<text text-anchor="middle" x="793.74" y="-218.8" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="793.74" y="-203.8" font-family="Times,serif" font-size="14.00">POKT Space</text>

</g>

<!-- Application.Stake Status -->

<g id="node7" class="node">

<title>Application.Stake Status</title>

<ellipse fill="none" stroke="black" cx="100.74" cy="-91" rx="100.98" ry="18"/>

<text text-anchor="middle" x="100.74" y="-87.3" font-family="Times,serif" font-size="14.00">Application.Stake Status</text>

</g>

<!-- Update Application Stake Status&#45;&gt;Application.Stake Status -->

<g id="edge5" class="edge">

<title>Update Application Stake Status&#45;&gt;Application.Stake Status</title>

<path fill="none" stroke="black" d="M242.99,-146.89C215.55,-136.3 179.52,-122.4 150.58,-111.23"/>

<polygon fill="black" stroke="black" points="151.65,-107.89 141.06,-107.56 149.13,-114.42 151.65,-107.89"/>

</g>

<!-- Application.Unstaking Height -->

<g id="node8" class="node">

<title>Application.Unstaking Height</title>

<ellipse fill="none" stroke="black" cx="339.74" cy="-91" rx="120.48" ry="18"/>

<text text-anchor="middle" x="339.74" y="-87.3" font-family="Times,serif" font-size="14.00">Application.Unstaking Height</text>

</g>

<!-- Update Application Stake Status&#45;&gt;Application.Unstaking Height -->

<g id="edge6" class="edge">

<title>Update Application Stake Status&#45;&gt;Application.Unstaking Height</title>

<path fill="none" stroke="black" d="M298.06,-145.81C304.74,-137.18 312.97,-126.56 320.35,-117.03"/>

<polygon fill="black" stroke="black" points="323.19,-119.08 326.55,-109.03 317.66,-114.79 323.19,-119.08"/>

</g>

<!-- Application.POKT Holdings -->

<g id="node9" class="node">

<title>Application.POKT Holdings</title>

<ellipse fill="none" stroke="black" cx="592.74" cy="-91" rx="115.08" ry="18"/>

<text text-anchor="middle" x="592.74" y="-87.3" font-family="Times,serif" font-size="14.00">Application.POKT Holdings</text>

</g>

<!-- Modify Application POKT Holdings&#45;&gt;Application.POKT Holdings -->

<g id="edge7" class="edge">

<title>Modify Application POKT Holdings&#45;&gt;Application.POKT Holdings</title>

<path fill="none" stroke="black" d="M579.86,-145.81C581.8,-137.7 584.16,-127.84 586.33,-118.78"/>

<polygon fill="black" stroke="black" points="589.74,-119.57 588.66,-109.03 582.93,-117.94 589.74,-119.57"/>

</g>

<!-- Application.Staked POKT -->

<g id="node10" class="node">

<title>Application.Staked POKT</title>

<ellipse fill="none" stroke="black" cx="839.74" cy="-91" rx="106.68" ry="18"/>

<text text-anchor="middle" x="839.74" y="-87.3" font-family="Times,serif" font-size="14.00">Application.Staked POKT</text>

</g>

<!-- Modify Application Stake&#45;&gt;Application.Staked POKT -->

<g id="edge8" class="edge">

<title>Modify Application Stake&#45;&gt;Application.Staked POKT</title>

<path fill="none" stroke="black" d="M842.77,-145.81C842.32,-137.79 841.77,-128.05 841.27,-119.07"/>

<polygon fill="black" stroke="black" points="844.76,-118.82 840.7,-109.03 837.77,-119.21 844.76,-118.82"/>

</g>

<!-- Application_2 -->

<g id="node6" class="node">

<title>Application_2</title>

<path fill="none" stroke="black" d="M507.24,-32.73C507.24,-34.53 488.64,-36 465.74,-36 442.84,-36 424.24,-34.53 424.24,-32.73 424.24,-32.73 424.24,-3.27 424.24,-3.27 424.24,-1.47 442.84,0 465.74,0 488.64,0 507.24,-1.47 507.24,-3.27 507.24,-3.27 507.24,-32.73 507.24,-32.73"/>

<path fill="none" stroke="black" d="M507.24,-32.73C507.24,-30.92 488.64,-29.45 465.74,-29.45 442.84,-29.45 424.24,-30.92 424.24,-32.73"/>

<text text-anchor="middle" x="465.74" y="-14.3" font-family="Times,serif" font-size="14.00">Application</text>

</g>

<!-- Application.Stake Status&#45;&gt;Application_2 -->

<g id="edge9" class="edge">

<title>Application.Stake Status&#45;&gt;Application_2</title>

<path fill="none" stroke="black" d="M166.42,-77.22C237.43,-63.41 349.16,-41.68 414.14,-29.04"/>

<polygon fill="black" stroke="black" points="415.01,-32.43 424.16,-27.09 413.67,-25.56 415.01,-32.43"/>

</g>

<!-- Application.Unstaking Height&#45;&gt;Application_2 -->

<g id="edge10" class="edge">

<title>Application.Unstaking Height&#45;&gt;Application_2</title>

<path fill="none" stroke="black" d="M368.96,-73.53C386.33,-63.75 408.56,-51.22 427.34,-40.64"/>

<polygon fill="black" stroke="black" points="429.25,-43.58 436.24,-35.62 425.81,-37.48 429.25,-43.58"/>

</g>

<!-- Application.POKT Holdings&#45;&gt;Application_2 -->

<g id="edge11" class="edge">

<title>Application.POKT Holdings&#45;&gt;Application_2</title>

<path fill="none" stroke="black" d="M563.29,-73.53C545.78,-63.75 523.37,-51.22 504.45,-40.64"/>

<polygon fill="black" stroke="black" points="505.91,-37.45 495.48,-35.62 502.5,-43.56 505.91,-37.45"/>

</g>

<!-- Application.Staked POKT&#45;&gt;Application_2 -->

<g id="edge12" class="edge">

<title>Application.Staked POKT&#45;&gt;Application_2</title>

<path fill="none" stroke="black" d="M771.58,-77.06C698.38,-63.16 583.7,-41.39 517.54,-28.83"/>

<polygon fill="black" stroke="black" points="517.83,-25.33 507.35,-26.9 516.53,-32.2 517.83,-25.33"/>

</g>

</g>

</svg>
<h2>State</h2><h3>Local States</h3><h2>Spaces</h2><h3>Return Application Stake Space</h3><p>{public_key: Public Key,<br/>amount: uPOKT}</p><h3>Application Stake Space</h3><p>{public_key: Public Key,<br/>stake_amount: uPOKT,<br/>services: List[Service],<br/>geo_zone: GeoZone,<br/>number_servicers: int}</p><h3>Modify Application POKT Space</h3><p>{public_key: Public Key,<br/>amount: uPOKT}</p><h2>Behavioral Action Space</h2><h2>Policies</h2><h3>Return Application Stake Policy</h3><p>The policy which determines when an application can have their stake returned.</p><h4>Preceded By:</h4>
<p>1. Return Application Stake</p><h4>Domain Spaces:</h4>
<p>1. Return Application Stake Space</p><h4>Followed By:</h4>
<p>1. Update Application Stake Status</p><p>2. Modify Application POKT Holdings</p><p>3. Modify Application Stake</p><h4>Codomain Spaces:</h4>
<p>1. Application Stake Space</p><p>2. Modify Application POKT Space</p><p>3. Modify Application POKT Space</p><h4>Constraints:</h4>
<h2>Mechanisms</h2><h3>Update Application Stake Status</h3><p>The mechanism which updates the staking status and as well the unstaking height for an application.</p><h4>Preceded By:</h4>
<p>1. Application Unstake Policy</p><p>2. Return Application Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Application Stake Status Space</p><h4>State Updates:</h4>
<p>1. Application.Stake Status</p><p>2. Application.Unstaking Height</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The application at DOMAIN[0].address has its unstaking_height variable updated to DOMAIN[0].height which will be none if it is staking. It will also have its stake status set to DOMAIN[0].status.</p><h3>Modify Application POKT Holdings</h3><p>The mechanism to update the personal holdings of an application</p><h4>Preceded By:</h4>
<p>1. Application Stake Policy</p><p>2. Return Application Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Modify Application POKT Space</p><h4>State Updates:</h4>
<p>1. Application.POKT Holdings</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The application at DOMAIN[0].application_address has its POKT Holdings modified by DOMAIN[0].value</p><h3>Modify Application Stake</h3><p>The mechanism to update the stake of an application</p><h4>Preceded By:</h4>
<p>1. Servicer Relay Policy</p><p>2. Burn Per Relay Policy</p><p>3. Application Stake Policy</p><p>4. Return Application Stake Policy</p><p>5. Burn Per Session Policy</p><h4>Domain Spaces:</h4>
<p>1. Modify Application POKT Space</p><h4>State Updates:</h4>
<p>1. Application.Staked POKT</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The servicer at DOMAIN[0].application_address has its stake modified by DOMAIN[0].value</p><h2>Parameters</h2><p>application_unstaking_time</p>