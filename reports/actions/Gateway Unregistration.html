<p>For explanations of generalized dynamical systems as well as how the mathematical specification library works in detail, please consult the documentation <a href="https://github.com/BlockScience/MSML/tree/main/docs">here</a></p>Graph Legend:<br/>Cylinder: Entity<br/>Orange Diamond: Boundary Action<br/>Red Square: Policy<br/>Blue Circle: Mechanism<br/>Transparent Circle: State Variable<h2>Action Map</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"

 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<!-- Generated by graphviz version 2.48.0 (0)

 -->

<!-- Title: Gateway Unregistration Pages: 1 -->

<svg width="492pt" height="497pt"

 viewBox="0.00 0.00 491.68 497.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 493)">

<title>Gateway Unregistration</title>

<polygon fill="white" stroke="transparent" points="-4,4 -4,-493 487.68,-493 487.68,4 -4,4"/>

<!-- Gateway -->

<g id="node1" class="node">

<title>Gateway</title>

<path fill="none" stroke="black" d="M276.94,-485.73C276.94,-487.53 262.15,-489 243.94,-489 225.73,-489 210.94,-487.53 210.94,-485.73 210.94,-485.73 210.94,-456.27 210.94,-456.27 210.94,-454.47 225.73,-453 243.94,-453 262.15,-453 276.94,-454.47 276.94,-456.27 276.94,-456.27 276.94,-485.73 276.94,-485.73"/>

<path fill="none" stroke="black" d="M276.94,-485.73C276.94,-483.92 262.15,-482.45 243.94,-482.45 225.73,-482.45 210.94,-483.92 210.94,-485.73"/>

<text text-anchor="middle" x="243.94" y="-467.3" font-family="Times,serif" font-size="14.00">Gateway</text>

</g>

<!-- Gateway Unregistration -->

<g id="node2" class="node">

<title>Gateway Unregistration</title>

<polygon fill="orange" stroke="orange" points="243.94,-416 105.35,-398 243.94,-380 382.53,-398 243.94,-416"/>

<text text-anchor="middle" x="243.94" y="-394.3" font-family="Times,serif" font-size="14.00">Gateway Unregistration</text>

</g>

<!-- Gateway&#45;&gt;Gateway Unregistration -->

<g id="edge1" class="edge">

<title>Gateway&#45;&gt;Gateway Unregistration</title>

<path fill="none" stroke="black" d="M243.94,-452.81C243.94,-444.79 243.94,-435.05 243.94,-426.07"/>

<polygon fill="black" stroke="black" points="247.44,-426.03 243.94,-416.03 240.44,-426.03 247.44,-426.03"/>

</g>

<!-- Gateway Unregistration Policy -->

<g id="node3" class="node">

<title>Gateway Unregistration Policy</title>

<polygon fill="red" stroke="red" points="338.94,-299 148.94,-299 148.94,-263 338.94,-263 338.94,-299"/>

<text text-anchor="middle" x="243.94" y="-277.3" font-family="Times,serif" font-size="14.00">Gateway Unregistration Policy</text>

</g>

<!-- Gateway Unregistration&#45;&gt;Gateway Unregistration Policy -->

<g id="edge2" class="edge">

<title>Gateway Unregistration&#45;&gt;Gateway Unregistration Policy</title>

<path fill="none" stroke="black" d="M243.94,-379.53C243.94,-360.94 243.94,-331.24 243.94,-309.5"/>

<polygon fill="black" stroke="black" points="247.44,-309.25 243.94,-299.25 240.44,-309.25 247.44,-309.25"/>

<text text-anchor="middle" x="284.94" y="-350.8" font-family="Times,serif" font-size="14.00">Gateway Unre</text>

<text text-anchor="middle" x="284.94" y="-335.8" font-family="Times,serif" font-size="14.00">gistration</text>

<text text-anchor="middle" x="284.94" y="-320.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Update Gateway Stake Status -->

<g id="node4" class="node">

<title>Update Gateway Stake Status</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="118.94" cy="-164" rx="118.88" ry="18"/>

<text text-anchor="middle" x="118.94" y="-160.3" font-family="Times,serif" font-size="14.00">Update Gateway Stake Status</text>

</g>

<!-- Gateway Unregistration Policy&#45;&gt;Update Gateway Stake Status -->

<g id="edge3" class="edge">

<title>Gateway Unregistration Policy&#45;&gt;Update Gateway Stake Status</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M225.23,-262.78C203.84,-243.11 168.71,-210.79 144.73,-188.73"/>

<polygon fill="black" stroke="black" points="147.1,-186.15 137.37,-181.96 142.36,-191.31 147.1,-186.15"/>

<text text-anchor="middle" x="238.44" y="-233.8" font-family="Times,serif" font-size="14.00">Servicer</text>

<text text-anchor="middle" x="238.44" y="-218.8" font-family="Times,serif" font-size="14.00">Stake Status</text>

<text text-anchor="middle" x="238.44" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Remove Gateway Delegator -->

<g id="node5" class="node">

<title>Remove Gateway Delegator</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="369.94" cy="-164" rx="113.98" ry="18"/>

<text text-anchor="middle" x="369.94" y="-160.3" font-family="Times,serif" font-size="14.00">Remove Gateway Delegator</text>

</g>

<!-- Gateway Unregistration Policy&#45;&gt;Remove Gateway Delegator -->

<g id="edge4" class="edge">

<title>Gateway Unregistration Policy&#45;&gt;Remove Gateway Delegator</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M262.8,-262.78C284.36,-243.11 319.77,-210.79 343.94,-188.73"/>

<polygon fill="black" stroke="black" points="346.33,-191.29 351.36,-181.96 341.61,-186.12 346.33,-191.29"/>

<text text-anchor="middle" x="366.94" y="-233.8" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="366.94" y="-218.8" font-family="Times,serif" font-size="14.00">Undelegation</text>

<text text-anchor="middle" x="366.94" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Gateway.Stake Status -->

<g id="node7" class="node">

<title>Gateway.Stake Status</title>

<ellipse fill="none" stroke="black" cx="162.94" cy="-91" rx="89.88" ry="18"/>

<text text-anchor="middle" x="162.94" y="-87.3" font-family="Times,serif" font-size="14.00">Gateway.Stake Status</text>

</g>

<!-- Update Gateway Stake Status&#45;&gt;Gateway.Stake Status -->

<g id="edge5" class="edge">

<title>Update Gateway Stake Status&#45;&gt;Gateway.Stake Status</title>

<path fill="none" stroke="black" d="M129.59,-145.81C134.83,-137.35 141.26,-126.98 147.07,-117.61"/>

<polygon fill="black" stroke="black" points="150.09,-119.37 152.39,-109.03 144.14,-115.69 150.09,-119.37"/>

</g>

<!-- Gateway.Delegators -->

<g id="node8" class="node">

<title>Gateway.Delegators</title>

<ellipse fill="none" stroke="black" cx="361.94" cy="-91" rx="83.69" ry="18"/>

<text text-anchor="middle" x="361.94" y="-87.3" font-family="Times,serif" font-size="14.00">Gateway.Delegators</text>

</g>

<!-- Remove Gateway Delegator&#45;&gt;Gateway.Delegators -->

<g id="edge6" class="edge">

<title>Remove Gateway Delegator&#45;&gt;Gateway.Delegators</title>

<path fill="none" stroke="black" d="M368,-145.81C367.1,-137.79 366,-128.05 364.99,-119.07"/>

<polygon fill="black" stroke="black" points="368.46,-118.57 363.86,-109.03 361.5,-119.36 368.46,-118.57"/>

</g>

<!-- Gateway_2 -->

<g id="node6" class="node">

<title>Gateway_2</title>

<path fill="none" stroke="black" d="M290.94,-32.73C290.94,-34.53 276.15,-36 257.94,-36 239.73,-36 224.94,-34.53 224.94,-32.73 224.94,-32.73 224.94,-3.27 224.94,-3.27 224.94,-1.47 239.73,0 257.94,0 276.15,0 290.94,-1.47 290.94,-3.27 290.94,-3.27 290.94,-32.73 290.94,-32.73"/>

<path fill="none" stroke="black" d="M290.94,-32.73C290.94,-30.92 276.15,-29.45 257.94,-29.45 239.73,-29.45 224.94,-30.92 224.94,-32.73"/>

<text text-anchor="middle" x="257.94" y="-14.3" font-family="Times,serif" font-size="14.00">Gateway</text>

</g>

<!-- Gateway.Stake Status&#45;&gt;Gateway_2 -->

<g id="edge7" class="edge">

<title>Gateway.Stake Status&#45;&gt;Gateway_2</title>

<path fill="none" stroke="black" d="M184.97,-73.53C197.59,-64.1 213.62,-52.13 227.43,-41.8"/>

<polygon fill="black" stroke="black" points="229.78,-44.41 235.7,-35.62 225.59,-38.81 229.78,-44.41"/>

</g>

<!-- Gateway.Delegators&#45;&gt;Gateway_2 -->

<g id="edge8" class="edge">

<title>Gateway.Delegators&#45;&gt;Gateway_2</title>

<path fill="none" stroke="black" d="M338.08,-73.71C323.91,-64.04 305.76,-51.64 290.31,-41.1"/>

<polygon fill="black" stroke="black" points="292.28,-38.21 282.05,-35.46 288.33,-43.99 292.28,-38.21"/>

</g>

</g>

</svg>
<h2>State</h2><h3>Local States</h3><h4>Gateway State</h4><table>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Symbol</th>
        <th>Domain</th>
      </tr><tr><td>Stake Status</td><td>The status of staking for the actor</td><td>StakeStatusType</td><td></td><td></td></tr><tr><td>Delegators</td><td>The applications which have delegated to this gateway</td><td>List[Application Entity]</td><td></td><td></td></tr><tr><td>POKT Holdings</td><td>The personal holdings of the application in uPOKT</td><td>uPOKT</td><td></td><td></td></tr><tr><td>Staked POKT</td><td>The amount that is staked by the application currently in uPOKT</td><td>uPOKT</td><td></td><td></td></tr></table><h2>Spaces</h2><h3>Application Undelegation Space</h3><p>{application_public_key: Public Key,<br/>gateway_public_key: Public Key}</p><h3>Gateway Unregistration Space</h3><p>{public_key: Public Key}</p><h3>Servicer Stake Status Space</h3><p>{address: Public Key,<br/>height: Block Height,<br/>status: StakeStatusType}</p><h2>Behavioral Action Space</h2><h3>Gateway Unregistration</h3><p>A Gateway is able to submit an UnstakeMsg to exit and remove itself from the network. After a successful UnstakeMsg, the Gateway is no eligible sign relays on behalf of an Application. On-chain delegation from existing Applications will be removed from the world state. After the GatewayUnstakingTime unbonding time elapses, the remaining stake is returned to the Gateway's address.</p><h4>Called By:</h4>
<p>1. Gateway</p><h4>Constraints:</h4>
<h2>Control Action Space</h2><h2>Policies</h2><h3>Gateway Unregistration Policy</h3><p>Policy which handles the logic of gateway unregistration process. It will set the stake status and remove any references to the gateway in terms of delegation.</p><h4>Preceded By:</h4>
<p>1. Gateway Unregistration</p><h4>Domain Spaces:</h4>
<p>1. Gateway Unregistration Space</p><h4>Followed By:</h4>
<p>1. Update Gateway Stake Status</p><p>2. Remove Gateway Delegator</p><h4>Codomain Spaces:</h4>
<p>1. Servicer Stake Status Space</p><p>2. Application Undelegation Space</p><h4>Constraints:</h4>
<h2>Mechanisms</h2><h3>Update Gateway Stake Status</h3><p>The mechanism for updating gateway stake status</p><h4>Preceded By:</h4>
<p>1. Gateway Unregistration Policy</p><p>2. Return Gateway Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Servicer Stake Status Space</p><h4>State Updates:</h4>
<p>1. Gateway.Stake Status</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The gateway at DOMAIN[0].gateway_address has its stake status updated to DOMAIN[0].status</p><h3>Remove Gateway Delegator</h3><p>The mechanism which removes an application that the gateway is a delegator for.</p><h4>Preceded By:</h4>
<p>1. Application Undelegate to Gateway Policy</p><p>2. Gateway Unregistration Policy</p><h4>Domain Spaces:</h4>
<p>1. Application Undelegation Space</p><h4>State Updates:</h4>
<p>1. Gateway.Delegators</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>Remove the application at DOMAIN[0].application_public_key from the delegators attribute for the gateway at DOMAIN[0].gateway_public_key</p><h2>Parameters</h2>