<p>For explanations of generalized dynamical systems as well as how the mathematical specification library works in detail, please consult the documentation <a href="https://github.com/BlockScience/MSML/tree/main/docs">here</a></p>Graph Legend:<br/>Cylinder: Entity<br/>Orange Diamond: Boundary Action<br/>Red Square: Policy<br/>Blue Circle: Mechanism<br/>Transparent Circle: State Variable<h2>Action Map</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"

 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<!-- Generated by graphviz version 2.48.0 (0)

 -->

<!-- Title: Portal Unregistration Pages: 1 -->

<svg width="448pt" height="497pt"

 viewBox="0.00 0.00 448.23 497.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 493)">

<title>Portal Unregistration</title>

<polygon fill="white" stroke="transparent" points="-4,4 -4,-493 444.23,-493 444.23,4 -4,4"/>

<!-- Portal -->

<g id="node1" class="node">

<title>Portal</title>

<path fill="none" stroke="black" d="M248.89,-485.73C248.89,-487.53 236.79,-489 221.89,-489 206.99,-489 194.89,-487.53 194.89,-485.73 194.89,-485.73 194.89,-456.27 194.89,-456.27 194.89,-454.47 206.99,-453 221.89,-453 236.79,-453 248.89,-454.47 248.89,-456.27 248.89,-456.27 248.89,-485.73 248.89,-485.73"/>

<path fill="none" stroke="black" d="M248.89,-485.73C248.89,-483.92 236.79,-482.45 221.89,-482.45 206.99,-482.45 194.89,-483.92 194.89,-485.73"/>

<text text-anchor="middle" x="221.89" y="-467.3" font-family="Times,serif" font-size="14.00">Portal</text>

</g>

<!-- Portal Unregistration -->

<g id="node2" class="node">

<title>Portal Unregistration</title>

<polygon fill="orange" stroke="orange" points="221.89,-416 98.56,-398 221.89,-380 345.22,-398 221.89,-416"/>

<text text-anchor="middle" x="221.89" y="-394.3" font-family="Times,serif" font-size="14.00">Portal Unregistration</text>

</g>

<!-- Portal&#45;&gt;Portal Unregistration -->

<g id="edge1" class="edge">

<title>Portal&#45;&gt;Portal Unregistration</title>

<path fill="none" stroke="black" d="M221.89,-452.81C221.89,-444.79 221.89,-435.05 221.89,-426.07"/>

<polygon fill="black" stroke="black" points="225.39,-426.03 221.89,-416.03 218.39,-426.03 225.39,-426.03"/>

</g>

<!-- Portal Unregistration Policy -->

<g id="node3" class="node">

<title>Portal Unregistration Policy</title>

<polygon fill="red" stroke="red" points="308.89,-299 134.89,-299 134.89,-263 308.89,-263 308.89,-299"/>

<text text-anchor="middle" x="221.89" y="-277.3" font-family="Times,serif" font-size="14.00">Portal Unregistration Policy</text>

</g>

<!-- Portal Unregistration&#45;&gt;Portal Unregistration Policy -->

<g id="edge2" class="edge">

<title>Portal Unregistration&#45;&gt;Portal Unregistration Policy</title>

<path fill="none" stroke="black" d="M221.89,-379.53C221.89,-360.94 221.89,-331.24 221.89,-309.5"/>

<polygon fill="black" stroke="black" points="225.39,-309.25 221.89,-299.25 218.39,-309.25 225.39,-309.25"/>

<text text-anchor="middle" x="257.89" y="-350.8" font-family="Times,serif" font-size="14.00">Portal Unreg</text>

<text text-anchor="middle" x="257.89" y="-335.8" font-family="Times,serif" font-size="14.00">istration</text>

<text text-anchor="middle" x="257.89" y="-320.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Update Portal Stake Status -->

<g id="node4" class="node">

<title>Update Portal Stake Status</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="107.89" cy="-164" rx="107.78" ry="18"/>

<text text-anchor="middle" x="107.89" y="-160.3" font-family="Times,serif" font-size="14.00">Update Portal Stake Status</text>

</g>

<!-- Portal Unregistration Policy&#45;&gt;Update Portal Stake Status -->

<g id="edge3" class="edge">

<title>Portal Unregistration Policy&#45;&gt;Update Portal Stake Status</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M204.58,-262.53C185.19,-242.97 153.63,-211.14 131.88,-189.2"/>

<polygon fill="black" stroke="black" points="134.15,-186.52 124.62,-181.88 129.18,-191.45 134.15,-186.52"/>

<text text-anchor="middle" x="220.39" y="-233.8" font-family="Times,serif" font-size="14.00">Servicer</text>

<text text-anchor="middle" x="220.39" y="-218.8" font-family="Times,serif" font-size="14.00">Stake Status</text>

<text text-anchor="middle" x="220.39" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Remove Portal Delegator -->

<g id="node5" class="node">

<title>Remove Portal Delegator</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="336.89" cy="-164" rx="103.18" ry="18"/>

<text text-anchor="middle" x="336.89" y="-160.3" font-family="Times,serif" font-size="14.00">Remove Portal Delegator</text>

</g>

<!-- Portal Unregistration Policy&#45;&gt;Remove Portal Delegator -->

<g id="edge4" class="edge">

<title>Portal Unregistration Policy&#45;&gt;Remove Portal Delegator</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M240.47,-262.7C246.41,-257.1 252.97,-250.83 258.89,-245 277.54,-226.63 298.19,-205.41 313.56,-189.43"/>

<polygon fill="black" stroke="black" points="316.25,-191.69 320.65,-182.05 311.2,-186.84 316.25,-191.69"/>

<text text-anchor="middle" x="338.89" y="-233.8" font-family="Times,serif" font-size="14.00">Application</text>

<text text-anchor="middle" x="338.89" y="-218.8" font-family="Times,serif" font-size="14.00">Undelegation</text>

<text text-anchor="middle" x="338.89" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Portal.Stake Status -->

<g id="node7" class="node">

<title>Portal.Stake Status</title>

<ellipse fill="none" stroke="black" cx="150.89" cy="-91" rx="79.09" ry="18"/>

<text text-anchor="middle" x="150.89" y="-87.3" font-family="Times,serif" font-size="14.00">Portal.Stake Status</text>

</g>

<!-- Update Portal Stake Status&#45;&gt;Portal.Stake Status -->

<g id="edge5" class="edge">

<title>Update Portal Stake Status&#45;&gt;Portal.Stake Status</title>

<path fill="none" stroke="black" d="M118.3,-145.81C123.42,-137.35 129.7,-126.98 135.38,-117.61"/>

<polygon fill="black" stroke="black" points="138.39,-119.4 140.58,-109.03 132.4,-115.77 138.39,-119.4"/>

</g>

<!-- Portal.Delegators -->

<g id="node8" class="node">

<title>Portal.Delegators</title>

<ellipse fill="none" stroke="black" cx="328.89" cy="-91" rx="74.19" ry="18"/>

<text text-anchor="middle" x="328.89" y="-87.3" font-family="Times,serif" font-size="14.00">Portal.Delegators</text>

</g>

<!-- Remove Portal Delegator&#45;&gt;Portal.Delegators -->

<g id="edge6" class="edge">

<title>Remove Portal Delegator&#45;&gt;Portal.Delegators</title>

<path fill="none" stroke="black" d="M334.95,-145.81C334.05,-137.79 332.95,-128.05 331.94,-119.07"/>

<polygon fill="black" stroke="black" points="335.41,-118.57 330.81,-109.03 328.45,-119.36 335.41,-118.57"/>

</g>

<!-- Portal_2 -->

<g id="node6" class="node">

<title>Portal_2</title>

<path fill="none" stroke="black" d="M262.89,-32.73C262.89,-34.53 250.79,-36 235.89,-36 220.99,-36 208.89,-34.53 208.89,-32.73 208.89,-32.73 208.89,-3.27 208.89,-3.27 208.89,-1.47 220.99,0 235.89,0 250.79,0 262.89,-1.47 262.89,-3.27 262.89,-3.27 262.89,-32.73 262.89,-32.73"/>

<path fill="none" stroke="black" d="M262.89,-32.73C262.89,-30.92 250.79,-29.45 235.89,-29.45 220.99,-29.45 208.89,-30.92 208.89,-32.73"/>

<text text-anchor="middle" x="235.89" y="-14.3" font-family="Times,serif" font-size="14.00">Portal</text>

</g>

<!-- Portal.Stake Status&#45;&gt;Portal_2 -->

<g id="edge7" class="edge">

<title>Portal.Stake Status&#45;&gt;Portal_2</title>

<path fill="none" stroke="black" d="M170.6,-73.53C181.79,-64.19 195.96,-52.35 208.24,-42.09"/>

<polygon fill="black" stroke="black" points="210.56,-44.72 215.99,-35.62 206.07,-39.35 210.56,-44.72"/>

</g>

<!-- Portal.Delegators&#45;&gt;Portal_2 -->

<g id="edge8" class="edge">

<title>Portal.Delegators&#45;&gt;Portal_2</title>

<path fill="none" stroke="black" d="M307.32,-73.53C294.88,-64.03 279.06,-51.95 265.47,-41.58"/>

<polygon fill="black" stroke="black" points="267.42,-38.66 257.34,-35.38 263.17,-44.23 267.42,-38.66"/>

</g>

</g>

</svg>
<h2>State</h2><h3>Local States</h3><h4>Portal State</h4><table>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Symbol</th>
        <th>Domain</th>
      </tr><tr><td>Stake Status</td><td>The status of staking for the actor</td><td>StakeStatusType</td><td></td><td></td></tr><tr><td>Delegators</td><td>The applications which have delegated to this portal</td><td>List[Application Entity]</td><td></td><td></td></tr><tr><td>POKT Holdings</td><td>The personal holdings of the application in uPOKT</td><td>uPOKT</td><td></td><td></td></tr><tr><td>Staked POKT</td><td>The amount that is staked by the application currently in uPOKT</td><td>uPOKT</td><td></td><td></td></tr></table><h2>Spaces</h2><h3>Servicer Stake Status Space</h3><p>{address: Public Key,<br/>height: Block Height,<br/>status: StakeStatusType}</p><h3>Application Undelegation Space</h3><p>{application_public_key: Public Key,<br/>portal_public_key: Public Key}</p><h3>Portal Unregistration Space</h3><p>{public_key: Public Key}</p><h2>Behavioral Action Space</h2><h3>Portal Unregistration</h3><p>A Portal is able to submit an UnstakeMsg to exit and remove itself from the network. After a successful UnstakeMsg, the Portal is no eligible sign relays on behalf of an Application. On-chain delegation from existing Applications will be removed from the world state. After the PortalUnstakingTime unbonding time elapses, the remaining stake is returned to the Portal's address.</p><h4>Called By:</h4>
<p>1. Portal</p><h4>Constraints:</h4>
<h2>Policies</h2><h3>Portal Unregistration Policy</h3><p>Policy which handles the logic of portal unregistration process. It will set the stake status and remove any references to the portal in terms of delegation.</p><h4>Preceded By:</h4>
<p>1. Portal Unregistration</p><h4>Domain Spaces:</h4>
<p>1. Portal Unregistration Space</p><h4>Followed By:</h4>
<p>1. Update Portal Stake Status</p><p>2. Remove Portal Delegator</p><h4>Codomain Spaces:</h4>
<p>1. Servicer Stake Status Space</p><p>2. Application Undelegation Space</p><h4>Constraints:</h4>
<h2>Mechanisms</h2><h3>Update Portal Stake Status</h3><p>The mechanism for updating portal stake status</p><h4>Preceded By:</h4>
<p>1. Portal Unregistration Policy</p><p>2. Return Portal Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Servicer Stake Status Space</p><h4>State Updates:</h4>
<p>1. Portal.Stake Status</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The portal at DOMAIN[0].portal_address has its stake status updated to DOMAIN[0].status</p><h3>Remove Portal Delegator</h3><p>The mechanism which removes an application that the portal is a delegator for.</p><h4>Preceded By:</h4>
<p>1. Application Undelegate to Portal Policy</p><p>2. Portal Unregistration Policy</p><h4>Domain Spaces:</h4>
<p>1. Application Undelegation Space</p><h4>State Updates:</h4>
<p>1. Portal.Delegators</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>Remove the application at DOMAIN[0].application_public_key from the delegators attribute for the portal at DOMAIN[0].portal_public_key</p><h2>Parameters</h2>