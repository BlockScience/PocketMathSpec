<p>For explanations of generalized dynamical systems as well as how the mathematical specification library works in detail, please consult the documentation <a href="https://github.com/BlockScience/MSML/tree/main/docs">here</a></p>Graph Legend:<br/>Cylinder: Entity<br/>Orange Diamond: Boundary Action<br/>Red Square: Policy<br/>Blue Circle: Mechanism<br/>Transparent Circle: State Variable<h2>Action Map</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"

 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<!-- Generated by graphviz version 2.48.0 (0)

 -->

<!-- Title: Gateway Registration Pages: 1 -->

<svg width="662pt" height="497pt"

 viewBox="0.00 0.00 662.48 497.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 493)">

<title>Gateway Registration</title>

<polygon fill="white" stroke="transparent" points="-4,4 -4,-493 658.48,-493 658.48,4 -4,4"/>

<!-- Gateway -->

<g id="node1" class="node">

<title>Gateway</title>

<path fill="none" stroke="black" d="M413.89,-485.73C413.89,-487.53 399.1,-489 380.89,-489 362.68,-489 347.89,-487.53 347.89,-485.73 347.89,-485.73 347.89,-456.27 347.89,-456.27 347.89,-454.47 362.68,-453 380.89,-453 399.1,-453 413.89,-454.47 413.89,-456.27 413.89,-456.27 413.89,-485.73 413.89,-485.73"/>

<path fill="none" stroke="black" d="M413.89,-485.73C413.89,-483.92 399.1,-482.45 380.89,-482.45 362.68,-482.45 347.89,-483.92 347.89,-485.73"/>

<text text-anchor="middle" x="380.89" y="-467.3" font-family="Times,serif" font-size="14.00">Gateway</text>

</g>

<!-- Gateway Registration -->

<g id="node2" class="node">

<title>Gateway Registration</title>

<polygon fill="orange" stroke="orange" points="380.89,-416 254.2,-398 380.89,-380 507.58,-398 380.89,-416"/>

<text text-anchor="middle" x="380.89" y="-394.3" font-family="Times,serif" font-size="14.00">Gateway Registration</text>

</g>

<!-- Gateway&#45;&gt;Gateway Registration -->

<g id="edge1" class="edge">

<title>Gateway&#45;&gt;Gateway Registration</title>

<path fill="none" stroke="black" d="M380.89,-452.81C380.89,-444.79 380.89,-435.05 380.89,-426.07"/>

<polygon fill="black" stroke="black" points="384.39,-426.03 380.89,-416.03 377.39,-426.03 384.39,-426.03"/>

</g>

<!-- Gateway Registration Policy -->

<g id="node3" class="node">

<title>Gateway Registration Policy</title>

<polygon fill="red" stroke="red" points="469.39,-299 292.39,-299 292.39,-263 469.39,-263 469.39,-299"/>

<text text-anchor="middle" x="380.89" y="-277.3" font-family="Times,serif" font-size="14.00">Gateway Registration Policy</text>

</g>

<!-- Gateway Registration&#45;&gt;Gateway Registration Policy -->

<g id="edge2" class="edge">

<title>Gateway Registration&#45;&gt;Gateway Registration Policy</title>

<path fill="none" stroke="black" d="M380.89,-379.53C380.89,-360.94 380.89,-331.24 380.89,-309.5"/>

<polygon fill="black" stroke="black" points="384.39,-309.25 380.89,-299.25 377.39,-309.25 384.39,-309.25"/>

<text text-anchor="middle" x="415.39" y="-350.8" font-family="Times,serif" font-size="14.00">Gateway</text>

<text text-anchor="middle" x="415.39" y="-335.8" font-family="Times,serif" font-size="14.00">Registration</text>

<text text-anchor="middle" x="415.39" y="-320.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Modify Gateway POKT Holdings -->

<g id="node4" class="node">

<title>Modify Gateway POKT Holdings</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="133.89" cy="-164" rx="133.78" ry="18"/>

<text text-anchor="middle" x="133.89" y="-160.3" font-family="Times,serif" font-size="14.00">Modify Gateway POKT Holdings</text>

</g>

<!-- Gateway Registration Policy&#45;&gt;Modify Gateway POKT Holdings -->

<g id="edge3" class="edge">

<title>Gateway Registration Policy&#45;&gt;Modify Gateway POKT Holdings</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M331.63,-262.98C317.07,-257.6 301.2,-251.38 286.89,-245 246.81,-227.15 202.55,-203.56 171.99,-186.63"/>

<polygon fill="black" stroke="black" points="173.4,-183.41 162.97,-181.6 170,-189.53 173.4,-183.41"/>

<text text-anchor="middle" x="331.89" y="-233.8" font-family="Times,serif" font-size="14.00">Modify</text>

<text text-anchor="middle" x="331.89" y="-218.8" font-family="Times,serif" font-size="14.00">Gateway POKT</text>

<text text-anchor="middle" x="331.89" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Modify Gateway Stake -->

<g id="node5" class="node">

<title>Modify Gateway Stake</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="380.89" cy="-164" rx="94.78" ry="18"/>

<text text-anchor="middle" x="380.89" y="-160.3" font-family="Times,serif" font-size="14.00">Modify Gateway Stake</text>

</g>

<!-- Gateway Registration Policy&#45;&gt;Modify Gateway Stake -->

<g id="edge4" class="edge">

<title>Gateway Registration Policy&#45;&gt;Modify Gateway Stake</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M380.89,-262.53C380.89,-243.94 380.89,-214.24 380.89,-192.5"/>

<polygon fill="black" stroke="black" points="384.39,-192.25 380.89,-182.25 377.39,-192.25 384.39,-192.25"/>

<text text-anchor="middle" x="425.89" y="-233.8" font-family="Times,serif" font-size="14.00">Modify</text>

<text text-anchor="middle" x="425.89" y="-218.8" font-family="Times,serif" font-size="14.00">Gateway POKT</text>

<text text-anchor="middle" x="425.89" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Add New Gateway -->

<g id="node6" class="node">

<title>Add New Gateway</title>

<ellipse fill="#e0eeee" stroke="#e0eeee" cx="573.89" cy="-164" rx="80.69" ry="18"/>

<text text-anchor="middle" x="573.89" y="-160.3" font-family="Times,serif" font-size="14.00">Add New Gateway</text>

</g>

<!-- Gateway Registration Policy&#45;&gt;Add New Gateway -->

<g id="edge5" class="edge">

<title>Gateway Registration Policy&#45;&gt;Add New Gateway</title>

<path fill="none" stroke="black" stroke-dasharray="5,2" d="M435.92,-262.9C449.07,-257.9 462.78,-251.9 474.89,-245 502.56,-229.23 530.46,-205.85 549.55,-188.44"/>

<polygon fill="black" stroke="black" points="551.96,-190.98 556.92,-181.62 547.2,-185.84 551.96,-190.98"/>

<text text-anchor="middle" x="570.39" y="-233.8" font-family="Times,serif" font-size="14.00">Gateway</text>

<text text-anchor="middle" x="570.39" y="-218.8" font-family="Times,serif" font-size="14.00">Registration</text>

<text text-anchor="middle" x="570.39" y="-203.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Gateway.POKT Holdings -->

<g id="node9" class="node">

<title>Gateway.POKT Holdings</title>

<ellipse fill="none" stroke="black" cx="142.89" cy="-91" rx="103.98" ry="18"/>

<text text-anchor="middle" x="142.89" y="-87.3" font-family="Times,serif" font-size="14.00">Gateway.POKT Holdings</text>

</g>

<!-- Modify Gateway POKT Holdings&#45;&gt;Gateway.POKT Holdings -->

<g id="edge6" class="edge">

<title>Modify Gateway POKT Holdings&#45;&gt;Gateway.POKT Holdings</title>

<path fill="none" stroke="black" d="M136.07,-145.81C137.08,-137.79 138.32,-128.05 139.46,-119.07"/>

<polygon fill="black" stroke="black" points="142.94,-119.39 140.73,-109.03 136,-118.51 142.94,-119.39"/>

</g>

<!-- Gateway.Staked POKT -->

<g id="node10" class="node">

<title>Gateway.Staked POKT</title>

<ellipse fill="none" stroke="black" cx="364.89" cy="-91" rx="95.58" ry="18"/>

<text text-anchor="middle" x="364.89" y="-87.3" font-family="Times,serif" font-size="14.00">Gateway.Staked POKT</text>

</g>

<!-- Modify Gateway Stake&#45;&gt;Gateway.Staked POKT -->

<g id="edge7" class="edge">

<title>Modify Gateway Stake&#45;&gt;Gateway.Staked POKT</title>

<path fill="none" stroke="black" d="M377.01,-145.81C375.21,-137.79 373.01,-128.05 370.99,-119.07"/>

<polygon fill="black" stroke="black" points="374.34,-118.01 368.73,-109.03 367.51,-119.55 374.34,-118.01"/>

</g>

<!-- Global.Gateways -->

<g id="node11" class="node">

<title>Global.Gateways</title>

<ellipse fill="none" stroke="black" cx="573.89" cy="-91" rx="73.39" ry="18"/>

<text text-anchor="middle" x="573.89" y="-87.3" font-family="Times,serif" font-size="14.00">Global.Gateways</text>

</g>

<!-- Add New Gateway&#45;&gt;Global.Gateways -->

<g id="edge8" class="edge">

<title>Add New Gateway&#45;&gt;Global.Gateways</title>

<path fill="none" stroke="black" d="M573.89,-145.81C573.89,-137.79 573.89,-128.05 573.89,-119.07"/>

<polygon fill="black" stroke="black" points="577.39,-119.03 573.89,-109.03 570.39,-119.03 577.39,-119.03"/>

</g>

<!-- Gateway_2 -->

<g id="node7" class="node">

<title>Gateway_2</title>

<path fill="none" stroke="black" d="M262.89,-32.73C262.89,-34.53 248.1,-36 229.89,-36 211.68,-36 196.89,-34.53 196.89,-32.73 196.89,-32.73 196.89,-3.27 196.89,-3.27 196.89,-1.47 211.68,0 229.89,0 248.1,0 262.89,-1.47 262.89,-3.27 262.89,-3.27 262.89,-32.73 262.89,-32.73"/>

<path fill="none" stroke="black" d="M262.89,-32.73C262.89,-30.92 248.1,-29.45 229.89,-29.45 211.68,-29.45 196.89,-30.92 196.89,-32.73"/>

<text text-anchor="middle" x="229.89" y="-14.3" font-family="Times,serif" font-size="14.00">Gateway</text>

</g>

<!-- Global_2 -->

<g id="node8" class="node">

<title>Global_2</title>

<path fill="none" stroke="black" d="M601.39,-32.73C601.39,-34.53 589.06,-36 573.89,-36 558.71,-36 546.39,-34.53 546.39,-32.73 546.39,-32.73 546.39,-3.27 546.39,-3.27 546.39,-1.47 558.71,0 573.89,0 589.06,0 601.39,-1.47 601.39,-3.27 601.39,-3.27 601.39,-32.73 601.39,-32.73"/>

<path fill="none" stroke="black" d="M601.39,-32.73C601.39,-30.92 589.06,-29.45 573.89,-29.45 558.71,-29.45 546.39,-30.92 546.39,-32.73"/>

<text text-anchor="middle" x="573.89" y="-14.3" font-family="Times,serif" font-size="14.00">Global</text>

</g>

<!-- Gateway.POKT Holdings&#45;&gt;Gateway_2 -->

<g id="edge9" class="edge">

<title>Gateway.POKT Holdings&#45;&gt;Gateway_2</title>

<path fill="none" stroke="black" d="M163.51,-73.17C174.8,-63.96 188.97,-52.39 201.32,-42.32"/>

<polygon fill="black" stroke="black" points="203.58,-44.99 209.12,-35.95 199.16,-39.56 203.58,-44.99"/>

</g>

<!-- Gateway.Staked POKT&#45;&gt;Gateway_2 -->

<g id="edge10" class="edge">

<title>Gateway.Staked POKT&#45;&gt;Gateway_2</title>

<path fill="none" stroke="black" d="M334.25,-73.89C315.01,-63.77 290,-50.61 269.28,-39.72"/>

<polygon fill="black" stroke="black" points="270.88,-36.6 260.4,-35.05 267.62,-42.8 270.88,-36.6"/>

</g>

<!-- Global.Gateways&#45;&gt;Global_2 -->

<g id="edge11" class="edge">

<title>Global.Gateways&#45;&gt;Global_2</title>

<path fill="none" stroke="black" d="M573.89,-72.81C573.89,-64.79 573.89,-55.05 573.89,-46.07"/>

<polygon fill="black" stroke="black" points="577.39,-46.03 573.89,-36.03 570.39,-46.03 577.39,-46.03"/>

</g>

</g>

</svg>
<h2>State</h2><h3>Local States</h3><h4>Gateway State</h4><table>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Symbol</th>
        <th>Domain</th>
      </tr><tr><td>Stake Status</td><td>The status of staking for the actor</td><td>StakeStatusType</td><td></td><td></td></tr><tr><td>Delegators</td><td>The applications which have delegated to this gateway</td><td>List[Application Entity]</td><td></td><td></td></tr><tr><td>POKT Holdings</td><td>The personal holdings of the application in uPOKT</td><td>uPOKT</td><td></td><td></td></tr><tr><td>Staked POKT</td><td>The amount that is staked by the application currently in uPOKT</td><td>uPOKT</td><td></td><td></td></tr></table><h2>Spaces</h2><h3>Modify Gateway POKT Space</h3><p>{public_key: Public Key,<br/>amount: uPOKT}</p><h3>Gateway Registration Space</h3><p>{public_key: Public Key,<br/>stake_amount: uPOKT,<br/>service_url: Service URL}</p><h2>Behavioral Action Space</h2><h3>Gateway Registration</h3><p>Registration differs from staking in the sense that the pubKey is known but there are no economic benefits/penalties in this stage of the protocol's progression. The Gateway must register on-chain in order for the Servicer to accept its signature as part of the ring. Future versions of the protocol may include on-chain rewards or penalties for the Gateway, but the current iteration will incentivize Gateways to provide a high quality, highly trusted service through free market economics.</p><h4>Called By:</h4>
<p>1. Gateway</p><h4>Constraints:</h4>
<h2>Control Action Space</h2><h2>Policies</h2><h3>Gateway Registration Policy</h3><p>Policy which handles the logic of gateway registration and if enough stake is present. The gateway is also added to the global state if it is approved.</p><h4>Preceded By:</h4>
<p>1. Gateway Registration</p><h4>Domain Spaces:</h4>
<p>1. Gateway Registration Space</p><h4>Followed By:</h4>
<p>1. Modify Gateway POKT Holdings</p><p>2. Modify Gateway Stake</p><p>3. Add New Gateway</p><h4>Codomain Spaces:</h4>
<p>1. Modify Gateway POKT Space</p><p>2. Modify Gateway POKT Space</p><p>3. Gateway Registration Space</p><h4>Constraints:</h4>
<h2>Mechanisms</h2><h3>Modify Gateway POKT Holdings</h3><p>The mechanism to update the personal holdings of a gateway</p><h4>Preceded By:</h4>
<p>1. Gateway Registration Policy</p><p>2. Return Gateway Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Modify Gateway POKT Space</p><h4>State Updates:</h4>
<p>1. Gateway.POKT Holdings</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The gateway at DOMAIN[0].gateway_address has its POKT Holdings modified by DOMAIN[0].value</p><h3>Modify Gateway Stake</h3><p>The mechanism to update the stake of a gateway</p><h4>Preceded By:</h4>
<p>1. Servicer Relay Policy</p><p>2. Gateway Registration Policy</p><p>3. Return Gateway Stake Policy</p><h4>Domain Spaces:</h4>
<p>1. Modify Gateway POKT Space</p><h4>State Updates:</h4>
<p>1. Gateway.Staked POKT</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The gateway at DOMAIN[0].gateway_address has its stake modified by DOMAIN[0].value</p><h3>Add New Gateway</h3><p>The mechanism for adding a new gateway to the global state</p><h4>Preceded By:</h4>
<p>1. Gateway Registration Policy</p><h4>Domain Spaces:</h4>
<p>1. Gateway Registration Space</p><h4>State Updates:</h4>
<p>1. Global.Gateways</p><h4>Constraints:</h4>
<h4>Logic:</h4>
<p>The gateway at DOMAIN[0].gateway_address is added to the global state</p><h2>Parameters</h2><p>gateway_minimum_stake</p>