<p>For explanations of generalized dynamical systems as well as how the mathematical specification library works in detail, please consult the documentation <a href="https://github.com/BlockScience/MSML/tree/main/docs">here</a></p>Graph Legend:<br/>Cylinder: Entity<br/>Orange Diamond: Boundary Action<br/>Red Square: Policy<br/>Blue Circle: Mechanism<br/>Transparent Circle: State Variable<h2>Action Map</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"

 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<!-- Generated by graphviz version 2.48.0 (0)

 -->

<!-- Title: Portal Pages: 1 -->

<svg width="1139pt" height="234pt"

 viewBox="0.00 0.00 1138.69 234.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 230)">

<title>Portal</title>

<polygon fill="white" stroke="transparent" points="-4,4 -4,-230 1134.69,-230 1134.69,4 -4,4"/>

<!-- Application -->

<g id="node1" class="node">

<title>Application</title>

<path fill="none" stroke="black" d="M172.02,-222.73C172.02,-224.53 153.42,-226 130.52,-226 107.62,-226 89.02,-224.53 89.02,-222.73 89.02,-222.73 89.02,-193.27 89.02,-193.27 89.02,-191.47 107.62,-190 130.52,-190 153.42,-190 172.02,-191.47 172.02,-193.27 172.02,-193.27 172.02,-222.73 172.02,-222.73"/>

<path fill="none" stroke="black" d="M172.02,-222.73C172.02,-220.92 153.42,-219.45 130.52,-219.45 107.62,-219.45 89.02,-220.92 89.02,-222.73"/>

<text text-anchor="middle" x="130.52" y="-204.3" font-family="Times,serif" font-size="14.00">Application</text>

</g>

<!-- Submit Relay Request -->

<g id="node6" class="node">

<title>Submit Relay Request</title>

<polygon fill="orange" stroke="orange" points="130.52,-153 -0.02,-135 130.52,-117 261.06,-135 130.52,-153"/>

<text text-anchor="middle" x="130.52" y="-131.3" font-family="Times,serif" font-size="14.00">Submit Relay Request</text>

</g>

<!-- Application&#45;&gt;Submit Relay Request -->

<g id="edge6" class="edge">

<title>Application&#45;&gt;Submit Relay Request</title>

<path fill="none" stroke="black" d="M130.52,-189.81C130.52,-181.79 130.52,-172.05 130.52,-163.07"/>

<polygon fill="black" stroke="black" points="134.02,-163.03 130.52,-153.03 127.02,-163.03 134.02,-163.03"/>

</g>

<!-- Portal -->

<g id="node2" class="node">

<title>Portal</title>

<path fill="none" stroke="black" d="M560.52,-222.73C560.52,-224.53 548.42,-226 533.52,-226 518.62,-226 506.52,-224.53 506.52,-222.73 506.52,-222.73 506.52,-193.27 506.52,-193.27 506.52,-191.47 518.62,-190 533.52,-190 548.42,-190 560.52,-191.47 560.52,-193.27 560.52,-193.27 560.52,-222.73 560.52,-222.73"/>

<path fill="none" stroke="black" d="M560.52,-222.73C560.52,-220.92 548.42,-219.45 533.52,-219.45 518.62,-219.45 506.52,-220.92 506.52,-222.73"/>

<text text-anchor="middle" x="533.52" y="-204.3" font-family="Times,serif" font-size="14.00">Portal</text>

</g>

<!-- Submit Relay Request (Portal) -->

<g id="node3" class="node">

<title>Submit Relay Request (Portal)</title>

<polygon fill="orange" stroke="orange" points="451.52,-153 278.92,-135 451.52,-117 624.12,-135 451.52,-153"/>

<text text-anchor="middle" x="451.52" y="-131.3" font-family="Times,serif" font-size="14.00">Submit Relay Request (Portal)</text>

</g>

<!-- Portal&#45;&gt;Submit Relay Request (Portal) -->

<g id="edge1" class="edge">

<title>Portal&#45;&gt;Submit Relay Request (Portal)</title>

<path fill="none" stroke="black" d="M514.09,-190.17C503.01,-180.58 488.98,-168.44 477.02,-158.08"/>

<polygon fill="black" stroke="black" points="478.99,-155.15 469.14,-151.25 474.41,-160.44 478.99,-155.15"/>

</g>

<!-- Portal Registration -->

<g id="node4" class="node">

<title>Portal Registration</title>

<polygon fill="orange" stroke="orange" points="754.52,-153 642.25,-135 754.52,-117 866.79,-135 754.52,-153"/>

<text text-anchor="middle" x="754.52" y="-131.3" font-family="Times,serif" font-size="14.00">Portal Registration</text>

</g>

<!-- Portal&#45;&gt;Portal Registration -->

<g id="edge3" class="edge">

<title>Portal&#45;&gt;Portal Registration</title>

<path fill="none" stroke="black" d="M560.62,-198.29C597.7,-186.38 664.72,-164.85 709.43,-150.49"/>

<polygon fill="black" stroke="black" points="710.72,-153.75 719.17,-147.36 708.57,-147.08 710.72,-153.75"/>

</g>

<!-- Portal Unregistration -->

<g id="node5" class="node">

<title>Portal Unregistration</title>

<polygon fill="orange" stroke="orange" points="1007.52,-153 884.19,-135 1007.52,-117 1130.85,-135 1007.52,-153"/>

<text text-anchor="middle" x="1007.52" y="-131.3" font-family="Times,serif" font-size="14.00">Portal Unregistration</text>

</g>

<!-- Portal&#45;&gt;Portal Unregistration -->

<g id="edge5" class="edge">

<title>Portal&#45;&gt;Portal Unregistration</title>

<path fill="none" stroke="black" d="M560.71,-202.93C633.41,-192.04 833.96,-162 939.91,-146.13"/>

<polygon fill="black" stroke="black" points="940.49,-149.58 949.86,-144.64 939.45,-142.66 940.49,-149.58"/>

</g>

<!-- Portal&#45;&gt;Submit Relay Request -->

<g id="edge7" class="edge">

<title>Portal&#45;&gt;Submit Relay Request</title>

<path fill="none" stroke="black" d="M506.45,-202.23C443.24,-191.09 284.48,-163.12 194.8,-147.32"/>

<polygon fill="black" stroke="black" points="195.2,-143.84 184.75,-145.55 193.99,-150.74 195.2,-143.84"/>

</g>

<!-- Submit Relay Request (Portal) Policy -->

<g id="node7" class="node">

<title>Submit Relay Request (Portal) Policy</title>

<polygon fill="red" stroke="red" points="565.02,-36 338.02,-36 338.02,0 565.02,0 565.02,-36"/>

<text text-anchor="middle" x="451.52" y="-14.3" font-family="Times,serif" font-size="14.00">Submit Relay Request (Portal) Policy</text>

</g>

<!-- Submit Relay Request (Portal)&#45;&gt;Submit Relay Request (Portal) Policy -->

<g id="edge2" class="edge">

<title>Submit Relay Request (Portal)&#45;&gt;Submit Relay Request (Portal) Policy</title>

<path fill="none" stroke="black" d="M451.52,-116.53C451.52,-97.94 451.52,-68.24 451.52,-46.5"/>

<polygon fill="black" stroke="black" points="455.02,-46.25 451.52,-36.25 448.02,-46.25 455.02,-46.25"/>

<text text-anchor="middle" x="486.52" y="-87.8" font-family="Times,serif" font-size="14.00">Portal Relay</text>

<text text-anchor="middle" x="486.52" y="-72.8" font-family="Times,serif" font-size="14.00">Request</text>

<text text-anchor="middle" x="486.52" y="-57.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

<!-- Portal Registration Policy -->

<g id="node8" class="node">

<title>Portal Registration Policy</title>

<polygon fill="red" stroke="red" points="835.02,-36 674.02,-36 674.02,0 835.02,0 835.02,-36"/>

<text text-anchor="middle" x="754.52" y="-14.3" font-family="Times,serif" font-size="14.00">Portal Registration Policy</text>

</g>

<!-- Portal Registration&#45;&gt;Portal Registration Policy -->

<g id="edge4" class="edge">

<title>Portal Registration&#45;&gt;Portal Registration Policy</title>

<path fill="none" stroke="black" d="M754.52,-116.53C754.52,-97.94 754.52,-68.24 754.52,-46.5"/>

<polygon fill="black" stroke="black" points="758.02,-46.25 754.52,-36.25 751.02,-46.25 758.02,-46.25"/>

<text text-anchor="middle" x="789.02" y="-87.8" font-family="Times,serif" font-size="14.00">Portal</text>

<text text-anchor="middle" x="789.02" y="-72.8" font-family="Times,serif" font-size="14.00">Registration</text>

<text text-anchor="middle" x="789.02" y="-57.8" font-family="Times,serif" font-size="14.00">Space</text>

</g>

</g>

</svg>
<h2>State</h2><h3>Local States</h3><h4>Application State</h4><table>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Symbol</th>
        <th>Domain</th>
      </tr><tr><td>Public key</td><td>The identifier of the application</td><td>Public Key</td><td></td><td></td></tr><tr><td>POKT Holdings</td><td>The personal holdings of the application in uPOKT</td><td>uPOKT</td><td></td><td></td></tr><tr><td>Staked POKT</td><td>The staked amount of the application in uPOKT</td><td>uPOKT</td><td></td><td></td></tr><tr><td>Relay Chains</td><td>The flavor(s) of Web3 hosted by this Servicer</td><td>List[Relay Chain]</td><td></td><td></td></tr><tr><td>GeoZone</td><td>The physical geo-location identifier this Servicer registered in</td><td>GeoZone</td><td></td><td></td></tr><tr><td>Number of Servicers</td><td>The number of servicers per request to be using</td><td>int</td><td></td><td></td></tr><tr><td>Stake Status</td><td>The status of staking for the actor</td><td>StakeStatusType</td><td></td><td></td></tr></table><h4>Portal State</h4><table>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Symbol</th>
        <th>Domain</th>
      </tr><tr><td>Stake Status</td><td>The status of staking for the actor</td><td>StakeStatusType</td><td></td><td></td></tr></table><h2>Spaces</h2><h3>Portal Unregistration Space</h3><p>{public_key: Public Key}</p><h3>Portal Relay Request Space</h3><p>{}</p><h3>Submit Relay Request Space</h3><p>{payload: dict,<br/>meta: dict,<br/>proof: dict,<br/>application_address: Public Key}</p><h3>Portal Registration Space</h3><p>{public_key: Public Key,<br/>stake_amount: uPOKT,<br/>service_url: Service URL}</p><h2>Behavioral Action Space</h2><h3>Submit Relay Request (Portal)</h3><p>Portal submitting a relay request on behalf of an application.</p><h4>Called By:</h4>
<p>1. Portal</p><h4>Constraints:</h4>
<h3>Portal Registration</h3><p>Registration differs from staking in the sense that the pubKey is known but there are no economic benefits/penalties in this stage of the protocol's progression. The Portal must register on-chain in order for the Servicer to accept its signature as part of the ring. Future versions of the protocol may include on-chain rewards or penalties for the Portal, but the current iteration will incentivize Portals to provide a high quality, highly trusted service through free market economics.</p><h4>Called By:</h4>
<p>1. Portal</p><h4>Constraints:</h4>
<h3>Portal Unregistration</h3><p>A Portal is able to submit an UnstakeMsg to exit and remove itself from the network. After a successful UnstakeMsg, the Portal is no eligible sign relays on behalf of an Application. On-chain delegation from existing Applications will be removed from the world state. After the PortalUnstakingTime unbonding time elapses, the remaining stake is returned to the Portal's address.</p><h4>Called By:</h4>
<p>1. Portal</p><h4>Constraints:</h4>
<h3>Submit Relay Request</h3><p>An application or the portal acting on its behalf submits a Relay Request, or an API requests to be routed to any Relay Chain</p><h4>Called By:</h4>
<p>1. Application</p><p>2. Portal</p><h4>Constraints:</h4>
<h2>Policies</h2><h3>Submit Relay Request (Portal) Policy</h3><p>Policy which handles the logic of portal relay requests and fees</p><h4>Preceded By:</h4>
<p>1. Submit Relay Request (Portal)</p><h4>Domain Spaces:</h4>
<p>1. Portal Relay Request Space</p><h4>Followed By:</h4>
<h4>Codomain Spaces:</h4>
<h4>Constraints:</h4>
<h3>Portal Registration Policy</h3><p>Policy which handles the logic of portal registration and if enough stake is present.</p><h4>Preceded By:</h4>
<p>1. Portal Registration</p><h4>Domain Spaces:</h4>
<p>1. Portal Registration Space</p><h4>Followed By:</h4>
<h4>Codomain Spaces:</h4>
<h4>Constraints:</h4>
<h2>Mechanisms</h2><h2>Parameters</h2><p>min_bootstrap_gateway_fee_per_relay</p><p>maturity_relay_cost</p><p>maturity_relay_charge</p><p>gateway_bootstrap_unwind_end</p><p>portal_minimum_stake</p><p>gateway_bootstrap_unwind_start</p>